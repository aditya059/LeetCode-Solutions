class Solution {
    long long solve(int num) {
        long long ans = 0;
        for(long long i = 1, j = 1; j <= num; i++, j *= 4) {
            long long x = min(4 * j - 1, (long long)num);
            ans += i * (x - j + 1);
        }
        return ans;
    }
public:
    long long minOperations(vector<vector<int>>& queries) {
        long long ans = 0;
        for(int i = 0; i < queries.size(); i++) {
            ans += (solve(queries[i][1]) - solve(queries[i][0] - 1) + 1) / 2;
        }
        return ans;
    }
};
