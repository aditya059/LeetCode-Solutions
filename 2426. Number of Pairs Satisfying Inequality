class Solution {
    void update(int i, vector<int> &BIT) {
        while(i < BIT.size()) {
            BIT[i]++;
            i += i & -i;
        }
    }
    int query(int i, vector<int> &BIT) {
        int sum = 0;
        while(i > 0) {
            sum += BIT[i];
            i -= i & -i;
        }
        return sum;
    }
public:
    long long numberOfPairs(vector<int>& nums1, vector<int>& nums2, int diff) {
        vector<int> BIT(100000);
        long long ans = 0;
        for(int i = 0; i < nums1.size(); i++) {
            ans += query(50000 + nums1[i] - nums2[i] + diff, BIT);
            update(50000 + nums1[i] - nums2[i], BIT);
        }
        return ans;
    }
};
