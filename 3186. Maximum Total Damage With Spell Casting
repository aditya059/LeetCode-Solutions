class Solution {
public:
    long long maximumTotalDamage(vector<int>& power) {
        map<int, int> Map;
        unordered_map<int, long> DP;
        for(int i = 0; i < power.size(); i++) {
            Map[power[i]]++;
        }
        Map[0] = 0;
        DP[0] = 0;
        for(auto iter = Map.begin(); iter != Map.end(); iter++) {
            auto i = Map.lower_bound(iter -> first - 2);
            DP[iter -> first] = max(DP[prev(iter) -> first], iter -> first * 1L * iter -> second + DP[(--i) -> first]);
        }
        return DP[(--Map.end()) -> first];
    }
};
